---
import MainLayout from '@/layouts/MainLayout.astro';
import { filmService } from '@/lib/api/services/filmService';
import { MovieGrid } from '@/components/movie/MovieGrid';

import type { Film } from '@/types/film';

let films: Film[] = [];
let error = null;

try {
  const data = await filmService.getHotFilms(24);
  films = data.data || [];
} catch (e) {
  error = e;
  console.error('Error fetching films:', e);
}
---

<MainLayout title="Xu H∆∞·ªõng - CineVerse" description="Phim ƒëang th·ªãnh h√†nh">
  <div class="container-custom pt-32 pb-12 md:pt-40">
    <div class="mb-8">
      <h1 class="heading-2 mb-2">üî• Xu H∆∞·ªõng</h1>
      <p class="text-text-secondary">Nh·ªØng b·ªô phim ƒëang ƒë∆∞·ª£c xem nhi·ªÅu nh·∫•t</p>
    </div>

    {
      error ? (
        <div class="text-center py-12">
          <p class="text-text-muted">Kh√¥ng th·ªÉ t·∫£i danh s√°ch phim. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
        </div>
      ) : (
        <MovieGrid movies={films} client:only="react" />
      )
    }
  </div>
</MainLayout>
